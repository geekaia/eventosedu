
<div class="container">
<div class="stepwizard">
    <div class="stepwizard-row setup-panel">
        <div class="stepwizard-step">
            <a href="#step-1" id="stp1" type="button" class="btn btn-default btn-circle" ><strong class="large">1</strong></a>
            <p>Sócio demográfico</p>
        </div>
        <div class="stepwizard-step">
            <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
            <p>Formação e profissão</p>
        </div>

        <div class="stepwizard-step">
            <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a>
            <p>Formação em saúde mental</p>
        </div>
    </div>
</div>
<form role="form" method="POST" action="/matricular">
    {% csrf_token %}
    <div class="row setup-content" id="step-1">
        <div class="col-xs-12">
            <div class="col-md-12">
                <h3> Dados sócio demográfico</h3>
                <div class="form-group">
                          <label class="control-label"  for="etnia">Etnia</label>
                          <br />
                          <input type="radio" name="etnia" id="etnia" value="branco" required> Branco<br>
                          <input type="radio" name="etnia" class="branco" value="Negro"> Negro<br>
                          <input type="radio" name="etnia"  value="Pardo" class="Pardo"> Pardo<br>
                          <input type="radio" name="etnia"  class="Indígena" value="Indígena"> Indígena<br>
                </div>

                 <div class="form-group">
                          <label class="control-label" >Estado civil</label> <br/>
                            <select class="form-control" name="estadocivil" id="estadocivil" required>
                                <option value="">--</option>
                                <option value="Solteiro">Solteiro</option>
                                <option value="Casado">Casado</option>
                                <option value="Viúvo">Viúvo</option>
                                <option value="Separado/divorciado">Separado/divorciado</option>
                                <option value="União estável/amasiado">União estável/amasiado</option>
                            </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Escolaridade</label>
                    <br />
                    <select name="escolaridade" id="escolaridade" class="form-control" required>
                            <option value="">--</option>
                            <option value="Fundamental Incompleto">Fundamental Incompleto</option>
                            <option value="Fundamental Completo">Fundamental Completo</option>
                            <option value="Médio completo">Médio completo</option>
                            <option value="Médio incompleto">Médio incompleto</option>
                            <option value="Superior incompleto">Superior incompleto</option>
                            <option value="Superior completo">Superior completo</option>
                            <option value="Especialização incomp">Especialização incomp</option>
                            <option value="Especialização completa">Especialização completa</option>
                            <option value="Mestrado incompleto">Mestrado incompleto</option>
                            <option value="Mestrado completo">Mestrado completo</option>
                            <option value="Doutorado completo">Doutorado completo</option>
                            <option value="Mestrado completo">Doutorado incompleto</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Renda individual mensal</label>
                    <select name="renda" class="form-control" id="renda" required>

                        <option value="">--</option>
                        <option value="Não possuo renda">Não possuo renda</option>
                        <option value="< 1 salario mínimo ((R$ <842,00)">< 1 salario mínimo ((R$ <842,00)</option>
                        <option value="1 a 3 salários mínimos (R$ 842,00 a R$2.526,00)">1 a 3 salários mínimos (R$ 842,00 a R$2.526,00)</option>
                        <option value="4 ou mais salários mínimos (R$ >= 3.368,00">4 ou mais salários mínimos (R$ >= 3.368,00</option>


                    </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Profissão</label>
                    <input maxlength="200" type="text" name="profissao" value="{{ ficha.profissao }}" required="required" class="form-control"  />
                </div>
                <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Próximo</button>
            </div>
        </div>
    </div>
    <div class="row setup-content" id="step-2">
        <div class="col-xs-12">
            <div class="col-md-12">
                <h3> Step 2</h3>
                <div class="form-group">
                    <label class="control-label">Você é acadêmico</label>
                    <select name="academico" class="form-control" id="academico" required>
                        <option value="">--</option>
                        <option value="Não">Não</option>
                        <option value="Sim, Biomedicina">Sim, Biomedicina</option>
                        <option value="Sim Direito">Sim Direito</option>
                        <option value="Sim, Educação Física">Sim, Educação Física</option>
                        <option value="Sim, Enfermagem">Sim, Enfermagem</option>
                        <option value="Sim, Farmácia">Sim, Farmácia</option>
                        <option value="Sim, Fisioterapia">Sim, Fisioterapia</option>
                        <option value="Sim, Jornalismo/Comunicação Social">Sim, Jornalismo/Comunicação Social</option>
                        <option value="Sim, Medicina">Sim, Medicina</option>
                        <option value="Sim, Nutrição">Sim, Nutrição</option>
                        <option value="Sim, Odontologia">Sim, Odontologia</option>
                        <option value="Sim, Pedagogia">Sim, Pedagogia</option>
                        <option value="Sim, Psicologia">Sim, Psicologia</option>
                        <option value="Sim, Serviço Social">Sim, Serviço Social</option>
                        <option value="Sim, outro">Sim, outro</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Instituição de ensino</label> <br />

                    <select name="instituicaodeensino" class="form-control" id="instituicaodeensino" required>
                        <option value="">--</option>
                        <option value="estudo na UFMT/CUA">estudo na UFMT/CUA</option>
                        <option value="estudo na UNIVAR">estudo na UNIVAR</option>
                        <option value="estudo na CATEDRAL">estudo na CATEDRAL</option>
                        <option value="estudo na ANHANGUERA">estudo na ANHANGUERA</option>
                        <option value="estudo na UNOPAR">estudo na UNOPAR</option>
                        <option value="estudo no SENAC">estudo no SENAC</option>
                        <option value="estudo no SECITEC">estudo no SECITEC</option>
                        <option value="estudo no Irmã Dulce">estudo no Irmã Dulce</option>
                        <option value="Outra instituição de ensino">Outra instituição de ensino</option>
                        <option value="Me formei em instituição pública">Me formei em instituição pública</option>
                        <option value="Me formei em instituição privada/particular">Me formei em instituição privada/particular</option>
                        <option value="não sou aluno de curso técnico ou graduação">não sou aluno de curso técnico ou graduação</option>
                    </select>
                </div>

                 <div class="form-group">
                    <label class="control-label">Você é aluno de cursos técnicos?</label> <br />

                    <select name="alunotecnico" id="alunotecnico" class="form-control" required>
                        <option value="">--</option>
                       <option value="Não">Não</option>
                        <option value="SIM, Técnico em Enfermagem">SIM, Técnico em Enfermagem</option>
                        <option value="SIM, Técnico em Saúde Bucal">SIM, Técnico em Saúde Bucal</option>
                        <option value="Sim, Técnico em Segurança do Trabalho">Sim, Técnico em Segurança do Trabalho.</option>
                        <option value="Sim, outro">Sim, outro</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Você é um profissional de saúde que atua na rede de atenção psicossocial (RAPS)</label> <br />
                     <select class="form-control"  name="profraps" id="profraps" required>
                         <option value="">--</option>
                        <option value="Não">Não</option>
                        <option value="SIM, trabalho em ESF">SIM, trabalho em ESF</option>
                        <option value="Sim, trabalho em hospital">Sim, trabalho em hospital</option>
                        <option value="Sim, atuo em CAPS (I, II, III, AD, i)">Sim, atuo em CAPS (I, II, III, AD, i)</option>
                        <option value="Sim, atuo no Ambulatório Saúde Mental">Sim, atuo no Ambulatório Saúde Mental</option>
                        <option value="Sim, atuo no CRAS">Sim, atuo no CRAS</option>
                        <option value="Sim, atuo no CREAS">Sim, atuo no CREAS</option>
                        <option value="Sim, atuo no NASF">Sim, atuo no NASF</option>
                        <option value="Sim, atuo em Unidade de Acolhimento Transitório">Sim, atuo em Unidade de Acolhimento Transitório</option>
                        <option value="Sim, atuo em Comunidade Terapêutica.">Sim, atuo em Comunidade Terapêutica.</option>
                        <option value="Sim, outro local de serviço vinculado a RAPS">Sim, outro local de serviço vinculado a RAPS</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="control-label">Me identifico com o plúblico na condição de formado, porém, não atuo no serviço do RAPS</label> <br />
                    <select class="form-control" name="identpublico" id="identpublico" required>
                        <option value="">--</option>
                        <option value="não">não</option>
                        <option value="sim, atuo na imprensa (rádio)">sim, atuo na imprensa (rádio)</option>
                        <option value="sim, atuo na imprensa (TV)">sim, atuo na imprensa (TV)</option>
                        <option value="Sim, atuo na educação">Sim, atuo na educação</option>
                        <option value="Sim, atuo em serviço particular (consultório, clínica)">Sim, atuo em serviço particular (consultório, clínica)</option>
                    </select>
                </div>

                   <div class="form-group">
                    <label class="control-label">Você é um paciente/usuário do serviço especializado em saúde mental?</label> <br />
                    <select name="usuarioservico" class="form-control" id="usuarioservico" required>
                        <option value="">--</option>
                        <option value="Não">Não</option>
                        <option value="Sim, do CAPS II de Barra do Garças">Sim, do CAPS II de Barra do Garças</option>
                        <option value="Sim, do CAPS AD de Barra do Garças">Sim, do CAPS AD de Barra do Garças</option>
                        <option value="Sim, do CAPS I de Aragarças">Sim, do CAPS I de Aragarças</option>
                        <option value="Sim, do ambulatório de saúde mental de Barra do Garças">Sim, do ambulatório de saúde mental de Barra do Garças</option>
                        <option value="Sim, do CAPS de outra cidade">Sim, do CAPS de outra cidade</option>
                </select>
                </div>

                   <div class="form-group">
                    <label class="control-label">Você é familiar de usuários do serviço especializado em saúde mental?</label> <br />
                    <select name="usuarioservicofamilia" class="form-control" id="usuarioservicofamilia" required>
                        <option value="">--</option>
                        <option value="Não">Não</option>
                        <option value="Sim, do CAPS II de Barra do Garças">Sim, do CAPS II de Barra do Garças</option>
                        <option value="Sim, do CAPS AD de Barra do Garças">Sim, do CAPS AD de Barra do Garças</option>
                        <option value="Sim, do CAPS I de Aragarças">Sim, do CAPS I de Aragarças</option>
                        <option value="Sim, do ambulatório de saúde mental de Barra do Garças">Sim, do ambulatório de saúde mental de Barra do Garças</option>
                        <option value="Sim, do CAPS de outra cidade">Sim, do CAPS de outra cidade</option>
                    </select>
                </div>
                <button class="btn btn-default prevBtn btn-lg pull-left" type="button">Anterior</button>
                <button class="btn btn-primary nextBtn btn-lg pull-right" type="button">Próximo</button>
            </div>
        </div>
    </div>

     <div class="row setup-content" id="step-3">
        <div class="col-xs-12">
            <div class="col-md-12">
                <h3> Passo 3</h3>

                <div class="form-group">
                <label class="control-label">Você já participou de alguma edição do Esamma?</label> <br />
                   <select class="form-control" name="japarticipou" id="japarticipou" required>
                       <option value="">--</option>
                        <option value="NÃO">NÃO</option>
                        <option value="Sim, 2014">Sim, 2014</option>
                        <option value="Sim, 2015">Sim, 2015</option>
                        <option value="Sim, 2014 e 2015">Sim, 2014 e 2015</option>
                    </select>
                </div>

                <div class="form-group">
                <label class="control-label">Em seu período escolar (curso técnico, curso para ACS, gradução  ou pós graduação) foi abordado algum tema voltado para a saúde mental ou psiquiatria?</label> <br />
                    <input type="radio" name="abordcont" id="abordcont" value="Não" required>Não<br>
                    <input type="radio" name="abordcont" value="Sim de forma superficial   (com menos de 30h)">Sim de forma superficial   (com menos de 30h)<br>
                    <input type="radio" name="abordcont" value="Sim de forma aprofundada   (acima de 30h)">Sim de forma aprofundada   (acima de 30h)<br>

                </div>

                <div class="form-group">
                <label class="control-label">Você já participou de algum curso de participação na área e saúde mental?</label> <br />
                    <input type="radio" name="partcurso" id="partcurso" value="Sim" required>Sim<br>
                    <input type="radio" name="partcurso" value="Não">Não<br>
                </div>

                <div class="form-group">
                <label class="control-label">Você já prestou alguma assistência/trabalho a pessoas com doença mental?</label> <br />
                    <input type="radio" name="jaauciliou" id="jaauciliou" value="Sim" required>Sim<br>
                    <input type="radio" name="jaauciliou" value="Não">Não<br>
                </div>

                <div class="form-group">
                <label class="control-label">Você já prestou alguma assistência/trabalho a pessoas dependentes de drogas?</label> <br />
                    <input type="radio" name="jaaucilioudrogas" id="jaauciliou" value="Sim" required>Sim<br>
                    <input type="radio" name="jaaucilioudrogas" value="Não">Não<br>
                </div>

                <div class="form-group">
                <label class="control-label">Você acredita ser importante discutir sobre as temáticas que envolvem a saúde mental?</label> <br />
                    <input type="radio" name="opiniaodiscussao" id="opiniaodiscussao" value="Sim" required>Sim<br>
                    <input type="radio" name="opiniaodiscussao" value="Não">Não<br>
                </div>

                <div class="form-group">
                <label class="control-label">Você acredita que o ESAMMA contribui com a desmistificação da loucura e com a redução do preconceito sobre as doenças mentais?</label> <br />
                    <input type="radio" name="opiniaoevento" id="opiniaodiscussao" value="Sim" required>Sim<br>
                    <input  type="radio" name="opiniaoevento" value="Não">Não<br>
                </div>
                <br />
                <div style="color: darkblue"><h4>*Atenção os 5kg alimento deverá ser entregue no momento do credenciamento no dia da abertura do evento (29/09/16)</h4></div>
                <br />
                <button class="btn btn-default prevBtn btn-lg pull-left" type="button" >Anterior</button>
                <button class="btn btn-success btn-lg pull-right" type="submit">Concluir inscrição</button>
            </div>
        </div>
    </div>

</form>
</div>

    <style>
             body{
                margin-top:40px;
            }
            .stepwizard-step p {
                margin-top: 10px;
            }
            .stepwizard-row {
                display: table-row;
            }
            .stepwizard {
                display: table;
                width: 100%;
                position: relative;
            }
            .stepwizard-step button[disabled] {
                opacity: 1 !important;
                filter: alpha(opacity=100) !important;
            }
            .stepwizard-row:before {
                top: 14px;
                bottom: 0;
                position: absolute;
                content: " ";
                width: 100%;
                height: 1px;
                background-color: #ccc;
                z-order: 0;
            }
            .stepwizard-step {
                display: table-cell;
                text-align: center;
                position: relative;
            }
            .btn-circle {
              width: 30px;
              height: 30px;
              text-align: center;
              padding: 6px 0;
              font-size: 12px;
              line-height: 1.428571429;
              border-radius: 15px;
            }
    </style>

    <script>
        var curStep;
        $(document).ready(function () {
            // alert("{{ ficha.etnia }}");

            {% if ficha.etnia %}
                {% autoescape off %}
                    $('input:radio[name="etnia"][value="{{ ficha.etnia }}"]').prop('checked', true);
                    $("#estadocivil").val("{{ ficha.estadocivil }}");
                    $("#escolaridade").val("{{ ficha.escolaridade }}");
                    
                    $("#renda").val("{{ ficha.renda }}");


                    $("#academico").val("{{ ficha.academico }}");
                    $("#instituicaodeensino").val("{{ ficha.instituicaodeensino }}");
                    $("#alunotecnico").val("{{ ficha.alunotecnico }}");
                    $("#profraps").val("{{ ficha.profraps }}");
                    $("#identpublico").val("{{ ficha.identpublico }}");
                    $("#usuarioservico").val("{{ ficha.usuarioservico }}");
                    $("#usuarioservicofamilia").val("{{ ficha.usuarioservicofamilia }}");
                    $("#japarticipou").val("{{ ficha.japarticipou }}");
                {% endautoescape %}

                $('input:radio[name="abordcont"][value="{{ ficha.abordcont}}"]').prop('checked', true);
                $('input:radio[name="partcurso"][value="{{ ficha.partcurso}}"]').prop('checked', true);
                $('input:radio[name="jaauciliou"][value="{{ ficha.jaauciliou}}"]').prop('checked', true);
                $('input:radio[name="jaaucilioudrogas"][value="{{ ficha.jaaucilioudrogas}}"]').prop('checked', true);
                $('input:radio[name="opiniaodiscussao"][value="{{ ficha.opiniaodiscussao}}"]').prop('checked', true);
                $('input:radio[name="opiniaoevento"][value="{{ ficha.opiniaoevento}}"]').prop('checked', true);

            {% endif %}



        var navListItems = $('div.setup-panel div a'),
                allWells = $('.setup-content'),
                allNextBtn = $('.nextBtn'),
                allPrevBtn = $('.prevBtn');

        allWells.hide();

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                    $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('btn-primary').addClass('btn-default');
                $item.addClass('btn-primary');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });

        allNextBtn.click(function(){
            curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url'],input[type='radio']"),
                isValid = true;

            // adicionar uma variavel para os selects e radio buttons
            $(".form-group").removeClass("has-error");
            for(var i=0; i<curInputs.length; i++){
                if (!curInputs[i].validity.valid){
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            var selects = curStep.find("select");
            for(var i=0; i<selects.length; i++)
            {
                console.log("Index selecitonado: "+selects[i].selectedIndex);
                if(selects[i].selectedIndex == 0) {
                    //console.log("Valor selecionado: "+ selects[i].options[selects[i].selectedIndex].text); // imprime o valor valor digitado
                    console.log("Este id não é válido:"+selects[i].id);
                    $("#"+selects[i].id).addClass("has-error");
                    isValid = false
                }
            }

            $('html, body').animate({ scrollTop: 0 }, 'fast');

            if (isValid)
                nextStepWizard.removeAttr('disabled').trigger('click');
        });

        allPrevBtn.click(function(){
            var curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                prevStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().prev().children("a");

            $(".form-group").removeClass("has-error");
            prevStepWizard.removeAttr('disabled').trigger('click');
            $('html, body').animate({ scrollTop: 0 }, 'fast');

        });

        //$('div.setup-panel div a.btn-primary').trigger('click');
        $("#stp1").trigger('click'); // simula o click para mostrar o div na tela do usuario
    });
    </script>
